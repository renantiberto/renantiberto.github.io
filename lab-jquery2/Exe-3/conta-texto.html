<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>

    <title>LabJQuery - Exe3</title>

    <style>
        .conta-palavra {
            border-style:dashed;
            text-align: center;
        }
        .col-lg-6 {
            padding: 5% center;
            text-align: center;
        }
    </style>

    <script>
        function conta(y, palavra){
            return y.filter((v) => (v === palavra)).length; 
        }

        $(function(){
            $("#botao").click(function(){
                let frase = $("#entrada").val();
                const r = /[0-9]/;
                if(r.test(frase) || frase == '')
                {
                    alert("Digite um valor v√°lido.");
                }
                else
                {
                    let array_frase = frase.split(" ").map(function(palavra)
                    { 
                        return palavra.toLocaleLowerCase().replace(/[.,]/g, '');
                    });
                    let arrayas = new Array;
                    let pu = new Array;
                    let i = 0;
                    let x = 0;
                    let oco;
                    for(palavra of array_frase)
                    { 
                        if(pu.indexOf(palavra) == -1)
                        {
                            oco = (conta(array_frase, palavra));
                            pu.push(palavra); 
                            arrayas[x] = oco;
                        }
                        else
                        {
                            x--;
                        }
                        i++;
                        x++;
                    }
                    for(i=0;i<pu.length;i++)
                    {
                        let obj_tr = $("<tr>");
                        $("#acervo").append(obj_tr);
                        let obj_td = $("<td>");
                        let obj_td2 = $("<td>");
                        obj_td.text(pu[i]);
                        obj_td2.text(arrayas[i]);
                        obj_tr.append(obj_td);
                        obj_tr.append(obj_td2);                 
                    }
                }        
            })

            $("#limpar").click(function(){
                $("#entrada").val("");
                $("#resultado").text("");
                $("#acervo td").remove();
            })

        });
    </script>

</head>

<body>

    <section>
        <div>
            <h2>Digite uma frase e conte suas palavras:</h2><br>

            <input type="text" id="entrada" placeholder="Escreva aqui">
            <button id="botao">Enviar</button>
            
            <div id="resultado"></div>
        </div>
        <br>
        <div class="col-lg-6">
            <table class="conta-palavra" id="acervo">
                <tr>
                    <th>Palavras</th>
                    <th>Ocorrencias</th=>
                </tr>
            </table>
        </div>

    </div>
        
    </section> 
	
</body>
</html>